import{d as X,j as t,r as Y,v as oe}from"./vendor-BcpBRJU8.js";import{u as se,M as ae,a as le,Z as ne,G as ie,b as re}from"./map-QFWzaBwh.js";import{u as ce,B as me,H as de,L as pe}from"./index-BaKCrqU7.js";import{_ as ue,q as ee,r as _e,t as fe,$ as ve,a0 as he}from"./icons-TCcohpgO.js";import{p as q}from"./parameters-CBP_5-z3.js";import{C as xe}from"./CountryFlag-CKp6Erkw.js";import"./data-CF_l-13f.js";import{f as ye}from"./date-D4_4G86a.js";import{a as je}from"./router-JuuIkx1m.js";import"./gallery-CVePIdsH.js";function Q(T){const e=X.c(16),{city:o,hoveredCity:u,setHoveredCity:a,baseZoom:j,defaultScale:W,minScale:E,maxScale:s,isFuture:r,isLived:l}=T,g=j===void 0?q.map.defaultZoom:j,v=W===void 0?q.map.marker.defaultScale:W;let d=E===void 0?q.map.marker.minScale:E,w=s===void 0?q.map.marker.maxScale:s;const I=r===void 0?!1:r,L=l===void 0?!1:l,{k:Z}=se(),h=v*(g/Z);d=o.country.minMarkerScale||d,w=o.country.maxMarkerScale||w;const _=Math.min(Math.max(h,d),w),x=u?.name===o.name,$=o.name+"-marker";let c;e[0]!==o||e[1]!==a?(c=()=>a&&a(o),e[0]=o,e[1]=a,e[2]=c):c=e[2];let n;e[3]!==a?(n=()=>a&&a(null),e[3]=a,e[4]=n):n=e[4];let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p={default:{outline:"none"},hover:{outline:"none"},pressed:{outline:"none"}},e[5]=p):p=e[5];const f=`${x?"marker-icon--hovered":""}
          ${I?"marker-icon--future":""}
          ${L?"marker-icon--lived":""}
        `;let i;e[6]!==_||e[7]!==f?(i=t.jsx(ue,{className:f,scale:_}),e[6]=_,e[7]=f,e[8]=i):i=e[8];let m;return e[9]!==o.coordinates||e[10]!==o.name||e[11]!==i||e[12]!==$||e[13]!==c||e[14]!==n?(m=t.jsx(ae,{coordinates:o.coordinates,id:$,onMouseEnter:c,onMouseLeave:n,style:p,children:i},o.name),e[9]=o.coordinates,e[10]=o.name,e[11]=i,e[12]=$,e[13]=c,e[14]=n,e[15]=m):m=e[15],m}function ge(T){const e=X.c(57),{city:o,onMouseEnter:u,onMouseLeave:a,setIsOpen:j}=T,W=je();let E;e[0]===Symbol.for("react.memo_cache_sentinel")?(E=["home"],e[0]=E):E=e[0];const{t:s,currLanguage:r}=ce(E),[l,g]=Y.useState(0),v=o.travels.filter(Ce);let d;e[1]!==o||e[2]!==u||e[3]!==a?(d=F=>t.jsx("div",{className:`map-tooltip__backdrop ${F}`,onMouseEnter:()=>u&&u(o),onMouseLeave:()=>a&&a()}),e[1]=o,e[2]=u,e[3]=a,e[4]=d):d=e[4];const w=d;let I,L;e[5]!==j?(I=()=>{const F=()=>document.hidden&&j(!1);return document.addEventListener("visibilitychange",F),()=>{document.removeEventListener("visibilitychange",F)}},L=[j],e[5]=j,e[6]=I,e[7]=L):(I=e[6],L=e[7]),Y.useEffect(I,L);let Z,h,_,x;e[8]!==w?(Z=w("map-tooltip__backdrop--top"),h=w("map-tooltip__backdrop--right"),_=w("map-tooltip__backdrop--bottom"),x=w("map-tooltip__backdrop--left"),e[8]=w,e[9]=Z,e[10]=h,e[11]=_,e[12]=x):(Z=e[9],h=e[10],_=e[11],x=e[12]);const $="map-tooltip__container";let c;e[13]!==o||e[14]!==u?(c=()=>u&&u(o),e[13]=o,e[14]=u,e[15]=c):c=e[15];let n;e[16]!==a?(n=()=>a&&a(),e[16]=a,e[17]=n):n=e[17];let p;e[18]!==o||e[19]!==s?(p=o.getName(s),e[18]=o,e[19]=s,e[20]=p):p=e[20];let f;e[21]!==p?(f=t.jsx("h2",{children:p}),e[21]=p,e[22]=f):f=e[22];let i;e[23]!==o.country.id?(i=t.jsx(xe,{countryId:o.country.id}),e[23]=o.country.id,e[24]=i):i=e[24];let m;e[25]!==f||e[26]!==i?(m=t.jsxs("div",{className:"map-tooltip__header",children:[f,i]}),e[25]=f,e[26]=i,e[27]=m):m=e[27];let D;e[28]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(ve,{className:"map-tooltip__metadata__icon"}),e[28]=D):D=e[28];let C;e[29]!==o.population||e[30]!==r?(C=o.population?o.population.toLocaleString(r.includes("it")?"it-IT":"en-US"):"-",e[29]=o.population,e[30]=r,e[31]=C):C=e[31];let S;e[32]!==C?(S=t.jsxs("div",{className:"map-tooltip__metadata__item",children:[D,C]}),e[32]=C,e[33]=S):S=e[33];let b;e[34]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(he,{className:"map-tooltip__metadata__icon"}),e[34]=b):b=e[34];const B=s(`currency.${o.country.currency}.name`);let y;e[35]!==B?(y=t.jsx("p",{className:"currency-row__name",children:B}),e[35]=B,e[36]=y):y=e[36];const H=" "+s(`currency.${o.country.currency}.symbol`);let k;e[37]!==H?(k=t.jsx("b",{className:"currency-row__symbol",children:H}),e[37]=H,e[38]=k):k=e[38];let M;e[39]!==y||e[40]!==k?(M=t.jsxs("div",{className:"map-tooltip__metadata__item",children:[b,y,k]}),e[39]=y,e[40]=k,e[41]=M):M=e[41];let N;e[42]!==S||e[43]!==M?(N=t.jsxs("div",{className:"map-tooltip__metadata",children:[S,M]}),e[42]=S,e[43]=M,e[44]=N):N=e[44];const z=v[l]?t.jsxs("div",{className:"map-tooltip__divider",children:[t.jsx("div",{className:"map-tooltip__content",children:t.jsxs("div",{className:"map-tooltip__content__travels",children:[t.jsxs("b",{className:"map-tooltip__content__travels__title",children:[s("selectedTravel")," ",l+1," /"," ",v.length]}),t.jsxs("div",{className:"map-tooltip__content__travels__selector",children:[t.jsx(ee,{className:`map-tooltip__content__chevron-icon map-tooltip__content__chevron-icon--left ${l>0?"":"map-tooltip__content__chevron-icon--disabled"}`,onClick:()=>l>0&&g(l-1)}),t.jsxs("div",{className:"map-tooltip__content__travel",children:[t.jsx(_e,{className:"map-tooltip__content__travel__icon"}),t.jsx("p",{children:ye({sDateInput:v[l].sDate,eDateInput:v[l].eDate,locale:r,includeWeekday:!0,showYear:!0})})]}),t.jsx(ee,{className:`map-tooltip__content__chevron-icon ${l<v.length-1?"":"map-tooltip__content__chevron-icon--disabled"}`,onClick:()=>l<v.length-1&&g(l+1)})]})]})}),v[l].photos&&v[l].photos.length>0?t.jsx("div",{className:"map-tooltip__footer",children:t.jsxs(me,{className:"map-tooltip__footer__button",onClick:()=>W(`/gallery/${o.name}/${l}?from=map`),children:[t.jsx(fe,{}),t.jsx("p",{children:s("galleryAlt")})]})}):null]}):null;let A;e[45]!==c||e[46]!==n||e[47]!==m||e[48]!==N||e[49]!==z?(A=t.jsxs("div",{className:$,onMouseEnter:c,onMouseLeave:n,children:[m,N,z]}),e[45]=c,e[46]=n,e[47]=m,e[48]=N,e[49]=z,e[50]=A):A=e[50];let O;return e[51]!==A||e[52]!==Z||e[53]!==h||e[54]!==_||e[55]!==x?(O=t.jsxs(t.Fragment,{children:[Z,h,_,x,A]}),e[51]=A,e[52]=Z,e[53]=h,e[54]=_,e[55]=x,e[56]=O):O=e[56],O}function Ce(T){return!T.isFuture}const Se="/assets/countries-50m-BgWjA-HH.json";function Fe(T){const e=X.c(78),{visitedCountries:o,visitedCities:u,futureCities:a,livedCities:j}=T,W=Y.useContext(de),{isDarkTheme:E,hoveredCity:s,setHoveredCity:r,mapPosition:l,responsive:g,setMapPosition:v}=W,[d,w]=Y.useState(!1);let I;e[0]!==E||e[1]!==o?(I=P=>{const U=o.find(G=>G.id===P);return U?U.fillColor:E?"#1a1a1a":"#dadada"},e[0]=E,e[1]=o,e[2]=I):I=e[2];const L=I,Z=be;let h,_,x,$,c,n,p,f,i,m,D,C,S,b,B,y,H,k;if(e[3]!==a||e[4]!==L||e[5]!==s||e[6]!==d||e[7]!==l.center||e[8]!==l.zoom||e[9]!==g.window||e[10]!==r||e[11]!==v||e[12]!==u){const P=u.sort(Z),U=a.sort(Z);f="map-container",e[31]!==g.window?(i={...g.window},e[31]=g.window,e[32]=i):i=e[32],e[33]!==d||e[34]!==g.window?(m=d?null:t.jsx("div",{className:"loading",style:{...g.window},children:t.jsx(pe,{})}),e[33]=d,e[34]=g.window,e[35]=m):m=e[35],_=le,x="map",$="",c="geoMercator",e[36]===Symbol.for("react.memo_cache_sentinel")?(n={scale:160},e[36]=n):n=e[36],p=g.window,h=ne,D=l.center,C=q.map.defaultMaxZoom,S=q.map.defaultMinZoom,e[37]!==v?(b=G=>v({center:G.coordinates,zoom:G.zoom}),e[37]=v,e[38]=b):b=e[38],B=l.zoom,e[39]!==L?(y=t.jsx(ie,{geography:Se,children:G=>{const{geographies:V}=G;return V.map((J,te)=>(te===V.length-1&&w(!0),t.jsx(re,{fill:L(J.properties.name),geography:J,strokeWidth:0,style:{default:{outline:"none"},hover:{outline:"none"},pressed:{outline:"none"}}},J.rsmKey)))}}),e[39]=L,e[40]=y):y=e[40],H=d?P.map((G,V)=>t.jsx(Q,{city:G,hoveredCity:s,setHoveredCity:r},V)):null,k=d?U.map((G,V)=>t.jsx(Q,{city:G,hoveredCity:s,isFuture:!0,setHoveredCity:r},V)):null,e[3]=a,e[4]=L,e[5]=s,e[6]=d,e[7]=l.center,e[8]=l.zoom,e[9]=g.window,e[10]=r,e[11]=v,e[12]=u,e[13]=h,e[14]=_,e[15]=x,e[16]=$,e[17]=c,e[18]=n,e[19]=p,e[20]=f,e[21]=i,e[22]=m,e[23]=D,e[24]=C,e[25]=S,e[26]=b,e[27]=B,e[28]=y,e[29]=H,e[30]=k}else h=e[13],_=e[14],x=e[15],$=e[16],c=e[17],n=e[18],p=e[19],f=e[20],i=e[21],m=e[22],D=e[23],C=e[24],S=e[25],b=e[26],B=e[27],y=e[28],H=e[29],k=e[30];let M;e[41]!==s||e[42]!==d||e[43]!==j||e[44]!==r?(M=d?j.map((P,U)=>t.jsx(Q,{city:P,hoveredCity:s,isLived:!0,setHoveredCity:r},U)):null,e[41]=s,e[42]=d,e[43]=j,e[44]=r,e[45]=M):M=e[45];let N;e[46]!==h||e[47]!==M||e[48]!==D||e[49]!==C||e[50]!==S||e[51]!==b||e[52]!==B||e[53]!==y||e[54]!==H||e[55]!==k?(N=t.jsxs(h,{center:D,maxZoom:C,minZoom:S,onMoveEnd:b,zoom:B,children:[y,H,k,M]}),e[46]=h,e[47]=M,e[48]=D,e[49]=C,e[50]=S,e[51]=b,e[52]=B,e[53]=y,e[54]=H,e[55]=k,e[56]=N):N=e[56];let z;e[57]!==_||e[58]!==x||e[59]!==$||e[60]!==c||e[61]!==n||e[62]!==p||e[63]!==N?(z=t.jsx(_,{className:x,"data-tip":$,projection:c,projectionConfig:n,...p,children:N}),e[57]=_,e[58]=x,e[59]=$,e[60]=c,e[61]=n,e[62]=p,e[63]=N,e[64]=z):z=e[64];const A=`#${s?.name}-marker`,O=s!==null;let F;e[65]!==s||e[66]!==r?(F=s?t.jsx(ge,{city:s,onMouseEnter:P=>r(P),onMouseLeave:()=>r(null),setIsOpen:P=>r(P?s:null)}):null,e[65]=s,e[66]=r,e[67]=F):F=e[67];let R;e[68]!==A||e[69]!==O||e[70]!==F?(R=t.jsx(oe,{anchorSelect:A,clickable:!0,id:"map-tooltip",isOpen:O,noArrow:!0,opacity:1,variant:"light",children:F}),e[68]=A,e[69]=O,e[70]=F,e[71]=R):R=e[71];let K;return e[72]!==f||e[73]!==i||e[74]!==m||e[75]!==z||e[76]!==R?(K=t.jsxs("div",{className:f,style:i,children:[m,z,R]}),e[72]=f,e[73]=i,e[74]=m,e[75]=z,e[76]=R,e[77]=K):K=e[77],K}function be(T,e){const o=T.coordinates[0],u=e.coordinates[0],a=T.coordinates[1],j=e.coordinates[1];return a<j?1:a>j||o<u?-1:o>u?1:0}export{Fe as default};
