import{d as q,j as s,r as U,v as le}from"./vendor-Cgh5DUS5.js";import{u as ae,M as ne,a as ie,Z as re,G as ce,b as me}from"./map-DtMc3GUw.js";import{u as de,B as pe,H as ue,L as _e}from"./index-BQN0gW4U.js";import{P as fe,q as te,r as he,t as ve,Q as xe,R as ge}from"./icons-BJJu2562.js";import{p as z}from"./parameters-Dz8axvME.js";import{C as ye}from"./CountryFlag-DRmXWQff.js";import{f as je}from"./date-C3Royx10.js";import{a as Ce}from"./router-DFS-ASVR.js";import{b as Le,v as Ne,f as Se,l as be}from"./data-DfR-guUc.js";import"./gallery-CKzmp_5C.js";function ke(t){const e=q.c(16),{city:o,hoveredCity:a,setHoveredCity:l,baseZoom:c,defaultScale:N,minScale:p,maxScale:i,isFuture:C,isLived:n}=t,O=c===void 0?z.map.defaultZoom:c,x=N===void 0?z.map.marker.defaultScale:N;let L=p===void 0?z.map.marker.minScale:p,f=i===void 0?z.map.marker.maxScale:i;const S=C===void 0?!1:C,b=n===void 0?!1:n,{k:g}=ae(),y=x*(O/g);L=o.country.minMarkerScale||L,f=o.country.maxMarkerScale||f;const h=Math.min(Math.max(y,L),f),j=a?.name===o.name,T=o.name+"-marker";let r;e[0]!==o||e[1]!==l?(r=()=>l&&l(o),e[0]=o,e[1]=l,e[2]=r):r=e[2];let m;e[3]!==l?(m=()=>l&&l(null),e[3]=l,e[4]=m):m=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u={default:{outline:"none"},hover:{outline:"none"},pressed:{outline:"none"}},e[5]=u):u=e[5];const v=`${j?"marker-icon--hovered":""}
          ${S?"marker-icon--future":""}
          ${b?"marker-icon--lived":""}
        `;let d;e[6]!==h||e[7]!==v?(d=s.jsx(fe,{className:v,scale:h}),e[6]=h,e[7]=v,e[8]=d):d=e[8];let _;return e[9]!==o.coordinates||e[10]!==o.name||e[11]!==d||e[12]!==T||e[13]!==r||e[14]!==m?(_=s.jsx(ne,{coordinates:o.coordinates,id:T,onMouseEnter:r,onMouseLeave:m,style:u,children:d},o.name),e[9]=o.coordinates,e[10]=o.name,e[11]=d,e[12]=T,e[13]=r,e[14]=m,e[15]=_):_=e[15],_}function Me(t){const e=q.c(57),{city:o,onMouseEnter:a,onMouseLeave:l,setIsOpen:c}=t,N=Ce();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=["home"],e[0]=p):p=e[0];const{t:i,currLanguage:C}=de(p),[n,O]=U.useState(0),x=o.travels.filter(Ee);let L;e[1]!==o||e[2]!==a||e[3]!==l?(L=G=>s.jsx("div",{className:`map-tooltip__backdrop ${G}`,onMouseEnter:()=>a&&a(o),onMouseLeave:()=>l&&l()}),e[1]=o,e[2]=a,e[3]=l,e[4]=L):L=e[4];const f=L;let S,b;e[5]!==c?(S=()=>{const G=()=>document.hidden&&c(!1);return document.addEventListener("visibilitychange",G),()=>{document.removeEventListener("visibilitychange",G)}},b=[c],e[5]=c,e[6]=S,e[7]=b):(S=e[6],b=e[7]),U.useEffect(S,b);let g,y,h,j;e[8]!==f?(g=f("map-tooltip__backdrop--top"),y=f("map-tooltip__backdrop--right"),h=f("map-tooltip__backdrop--bottom"),j=f("map-tooltip__backdrop--left"),e[8]=f,e[9]=g,e[10]=y,e[11]=h,e[12]=j):(g=e[9],y=e[10],h=e[11],j=e[12]);const T="map-tooltip__container";let r;e[13]!==o||e[14]!==a?(r=()=>a&&a(o),e[13]=o,e[14]=a,e[15]=r):r=e[15];let m;e[16]!==l?(m=()=>l&&l(),e[16]=l,e[17]=m):m=e[17];let u;e[18]!==o||e[19]!==i?(u=o.getName(i),e[18]=o,e[19]=i,e[20]=u):u=e[20];let v;e[21]!==u?(v=s.jsx("h2",{children:u}),e[21]=u,e[22]=v):v=e[22];let d;e[23]!==o.country.id?(d=s.jsx(ye,{countryId:o.country.id}),e[23]=o.country.id,e[24]=d):d=e[24];let _;e[25]!==v||e[26]!==d?(_=s.jsxs("div",{className:"map-tooltip__header",children:[v,d]}),e[25]=v,e[26]=d,e[27]=_):_=e[27];let k;e[28]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(xe,{className:"map-tooltip__metadata__icon"}),e[28]=k):k=e[28];let M;e[29]!==o.population||e[30]!==C?(M=o.population?o.population.toLocaleString(C):"-",e[29]=o.population,e[30]=C,e[31]=M):M=e[31];let E;e[32]!==M?(E=s.jsxs("div",{className:"map-tooltip__metadata__item",children:[k,M]}),e[32]=M,e[33]=E):E=e[33];let w;e[34]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(ge,{className:"map-tooltip__metadata__icon"}),e[34]=w):w=e[34];const Z=i(`currency.${o.country.currency}.name`);let $;e[35]!==Z?($=s.jsx("p",{className:"currency-row__name",children:Z}),e[35]=Z,e[36]=$):$=e[36];const H=" "+i(`currency.${o.country.currency}.symbol`);let F;e[37]!==H?(F=s.jsx("b",{className:"currency-row__symbol",children:H}),e[37]=H,e[38]=F):F=e[38];let I;e[39]!==$||e[40]!==F?(I=s.jsxs("div",{className:"map-tooltip__metadata__item",children:[w,$,F]}),e[39]=$,e[40]=F,e[41]=I):I=e[41];let D;e[42]!==E||e[43]!==I?(D=s.jsxs("div",{className:"map-tooltip__metadata",children:[E,I]}),e[42]=E,e[43]=I,e[44]=D):D=e[44];const A=x[n]?s.jsxs("div",{className:"map-tooltip__divider",children:[s.jsx("div",{className:"map-tooltip__content",children:s.jsxs("div",{className:"map-tooltip__content__travels",children:[s.jsxs("b",{className:"map-tooltip__content__travels__title",children:[i("selectedTravel")," ",n+1," /"," ",x.length]}),s.jsxs("div",{className:"map-tooltip__content__travels__selector",children:[s.jsx(te,{className:`map-tooltip__content__chevron-icon map-tooltip__content__chevron-icon--left ${n>0?"":"map-tooltip__content__chevron-icon--disabled"}`,onClick:()=>n>0&&O(n-1)}),s.jsxs("div",{className:"map-tooltip__content__travel",children:[s.jsx(he,{className:"map-tooltip__content__travel__icon"}),s.jsx("p",{children:je({sDateInput:x[n].sDate,eDateInput:x[n].eDate,locale:C,includeWeekday:!0,showYear:!0})})]}),s.jsx(te,{className:`map-tooltip__content__chevron-icon ${n<x.length-1?"":"map-tooltip__content__chevron-icon--disabled"}`,onClick:()=>n<x.length-1&&O(n+1)})]})]})}),x[n].photos&&x[n].photos.length>0?s.jsx("div",{className:"map-tooltip__footer",children:s.jsxs(pe,{className:"map-tooltip__footer__button",onClick:()=>N(`/gallery/${o.name}/${n}?from=map`),children:[s.jsx(ve,{}),s.jsx("p",{children:i("galleryAlt")})]})}):null]}):null;let R;e[45]!==r||e[46]!==m||e[47]!==_||e[48]!==D||e[49]!==A?(R=s.jsxs("div",{className:T,onMouseEnter:r,onMouseLeave:m,children:[_,D,A]}),e[45]=r,e[46]=m,e[47]=_,e[48]=D,e[49]=A,e[50]=R):R=e[50];let B;return e[51]!==R||e[52]!==g||e[53]!==y||e[54]!==h||e[55]!==j?(B=s.jsxs(s.Fragment,{children:[g,y,h,j,R]}),e[51]=R,e[52]=g,e[53]=y,e[54]=h,e[55]=j,e[56]=B):B=e[56],B}function Ee(t){return!t.isFuture}const $e="/assets/countries-50m-BgWjA-HH.json",X=(t,e)=>{const o=t.coordinates[0],a=e.coordinates[0],l=t.coordinates[1],c=e.coordinates[1];return l<c?1:l>c||o<a?-1:o>a?1:0},Fe="#1a1a1a",Ie="#dadada",Te={default:{outline:"none"},hover:{outline:"none"},pressed:{outline:"none"}},we={scale:160};function De(t){const e=q.c(11),{geographies:o,getCountryFillColor:a,onLoaded:l}=t,c=U.useRef(!1);let N,p;e[0]!==o.length||e[1]!==l?(N=()=>{!c.current&&o.length>0&&(c.current=!0,l())},p=[o.length,l],e[0]=o.length,e[1]=l,e[2]=N,e[3]=p):(N=e[2],p=e[3]),U.useEffect(N,p);let i;if(e[4]!==o||e[5]!==a){let n;e[7]!==a?(n=O=>s.jsx(me,{fill:a(O.properties.name),geography:O,strokeWidth:0,style:Te},O.rsmKey),e[7]=a,e[8]=n):n=e[8],i=o.map(n),e[4]=o,e[5]=a,e[6]=i}else i=e[6];let C;return e[9]!==i?(C=s.jsx(s.Fragment,{children:i}),e[9]=i,e[10]=C):C=e[10],C}function Ye(){const t=q.c(70),e=U.useContext(ue),{isDarkTheme:o,hoveredCity:a,setHoveredCity:l,mapPosition:c,responsive:N,setMapPosition:p}=e,[i,C]=U.useState(!1);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=Object.fromEntries(Le.map(Ae)),t[0]=n):n=t[0];const O=n;let x;t[1]!==o?(x=A=>O[A]??(o?Fe:Ie),t[1]=o,t[2]=x):x=t[2];const L=x;let f,S,b,g,y,h,j,T,r,m,u,v,d,_,k,M,E,w;if(t[3]!==L||t[4]!==a||t[5]!==i||t[6]!==c.center||t[7]!==c.zoom||t[8]!==N.window||t[9]!==l||t[10]!==p){const A=[...Ne].sort(X),R=[...Se].sort(X),B=[...be].sort(X);let G;t[29]===Symbol.for("react.memo_cache_sentinel")?(G=()=>{C(!0)},t[29]=G):G=t[29];const oe=G;let Y;t[30]!==p?(Y=P=>{p({center:P.coordinates,zoom:P.zoom})},t[30]=p,t[31]=Y):Y=t[31];const se=Y;let K;t[32]!==a||t[33]!==l?(K=(P,V)=>P.map(ee=>s.jsx(ke,{city:ee,hoveredCity:a,setHoveredCity:l,...V},ee.name)),t[32]=a,t[33]=l,t[34]=K):K=t[34];const J=K;let Q;e:{if(!a){Q="";break e}Q=`#${CSS.escape(`${a.name}-marker`)}`}w=Q;const W=N.window;j="map-container",T=W,t[35]!==i||t[36]!==W?(r=i?null:s.jsx("div",{className:"loading",style:W,children:s.jsx(_e,{})}),t[35]=i,t[36]=W,t[37]=r):r=t[37],S=ie,E="map",b="",g="geoMercator",y=we,h=W,f=re,m=c.center,u=z.map.defaultMaxZoom,v=z.map.defaultMinZoom,d=se,_=c.zoom,t[38]!==L?(k=s.jsx(ce,{geography:$e,children:P=>{const{geographies:V}=P;return V.length>0?s.jsx(De,{geographies:V,getCountryFillColor:L,onLoaded:oe}):null}}),t[38]=L,t[39]=k):k=t[39],M=i?s.jsxs(s.Fragment,{children:[J(A),J(R,{isFuture:!0}),J(B,{isLived:!0})]}):null,t[3]=L,t[4]=a,t[5]=i,t[6]=c.center,t[7]=c.zoom,t[8]=N.window,t[9]=l,t[10]=p,t[11]=f,t[12]=S,t[13]=b,t[14]=g,t[15]=y,t[16]=h,t[17]=j,t[18]=T,t[19]=r,t[20]=m,t[21]=u,t[22]=v,t[23]=d,t[24]=_,t[25]=k,t[26]=M,t[27]=E,t[28]=w}else f=t[11],S=t[12],b=t[13],g=t[14],y=t[15],h=t[16],j=t[17],T=t[18],r=t[19],m=t[20],u=t[21],v=t[22],d=t[23],_=t[24],k=t[25],M=t[26],E=t[27],w=t[28];let Z;t[40]!==f||t[41]!==m||t[42]!==u||t[43]!==v||t[44]!==d||t[45]!==_||t[46]!==k||t[47]!==M?(Z=s.jsxs(f,{center:m,maxZoom:u,minZoom:v,onMoveEnd:d,zoom:_,children:[k,M]}),t[40]=f,t[41]=m,t[42]=u,t[43]=v,t[44]=d,t[45]=_,t[46]=k,t[47]=M,t[48]=Z):Z=t[48];let $;t[49]!==S||t[50]!==b||t[51]!==g||t[52]!==y||t[53]!==h||t[54]!==Z||t[55]!==E?($=s.jsx(S,{className:E,"data-tip":b,projection:g,projectionConfig:y,...h,children:Z}),t[49]=S,t[50]=b,t[51]=g,t[52]=y,t[53]=h,t[54]=Z,t[55]=E,t[56]=$):$=t[56];const H=!!a;let F;t[57]!==a||t[58]!==l?(F=a?s.jsx(Me,{city:a,onMouseEnter:A=>l(A),onMouseLeave:()=>l(null),setIsOpen:A=>l(A?a:null)}):null,t[57]=a,t[58]=l,t[59]=F):F=t[59];let I;t[60]!==H||t[61]!==F||t[62]!==w?(I=s.jsx(le,{anchorSelect:w,clickable:!0,id:"map-tooltip",isOpen:H,noArrow:!0,opacity:1,variant:"light",children:F}),t[60]=H,t[61]=F,t[62]=w,t[63]=I):I=t[63];let D;return t[64]!==j||t[65]!==T||t[66]!==r||t[67]!==$||t[68]!==I?(D=s.jsxs("div",{className:j,style:T,children:[r,$,I]}),t[64]=j,t[65]=T,t[66]=r,t[67]=$,t[68]=I,t[69]=D):D=t[69],D}function Ae(t){return[t.id,t.fillColor]}export{Ye as default};
